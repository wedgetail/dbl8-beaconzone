array( "apikey" => '00FAB0C0-EAA8-4AE4-A88D-962621D51428', "devices" => array( "60019402A1EA", "60019402A1EB", "60019402A1EC", ), "device_configs" => array( "default" => [], "ABv2" => array( "wifi_configs" => array( array( "ssid" => "DBL8-111", "passkey" => "71385b5e529c5a14d3b29d6aed75cb0e2ed52f9001da8853ae1c65ba693cd726" ), array( "ssid" => "DBL8-22", "passkey" => "5cb7b2f1b75a83a96b0d12b5a69ef76db27f827c1c77ec12705a74044c910782" ), ), "ab_bbt_config" => array( "conn_type" => 3, "host" => "192.168.31.26", "port" => 1883, "req_int" => 3, "mqtt_topic" => "beacons522", "mqtt_ssl" => false, "min_rssi" => -127, "adv_filter" => 1, "url" => "ble.php", "data_format" => 1 ) ) ), ), ); $apikey = $_GET['apikey']; $deviceId = $_GET['device_id']; foreach($data as $k => $v) { if (($apikey != $v['apikey']) || !in_array($deviceId, $v['devices'])) { continue; } $response = array( 'device_configs' => $v['device_configs'], 'bound_site' => $k, ); echo json_encode($response); }